<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<!-- README.md is generated from README.Rmd. Please edit that file -->

<h1 id="clinspacy">clinspacy</h1>
<!-- badges: start -->

<p><a href="https://www.tidyverse.org/lifecycle/#maturing"><img src="data:image/svg+xml;charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTE2IiBoZWlnaHQ9IjIwIiByb2xlPSJpbWciIGFyaWEtbGFiZWw9ImxpZmVjeWNsZTogbWF0dXJpbmciPjx0aXRsZT5saWZlY3ljbGU6IG1hdHVyaW5nPC90aXRsZT48bGluZWFyR3JhZGllbnQgaWQ9InMiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9InIiPjxyZWN0IHdpZHRoPSIxMTYiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjcikiPjxyZWN0IHdpZHRoPSI1NSIgaGVpZ2h0PSIyMCIgZmlsbD0iIzU1NSIvPjxyZWN0IHg9IjU1IiB3aWR0aD0iNjEiIGhlaWdodD0iMjAiIGZpbGw9IiMwMDdlYzYiLz48cmVjdCB3aWR0aD0iMTE2IiBoZWlnaHQ9IjIwIiBmaWxsPSJ1cmwoI3MpIi8+PC9nPjxnIGZpbGw9IiNmZmYiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGZvbnQtZmFtaWx5PSJWZXJkYW5hLEdlbmV2YSxEZWphVnUgU2FucyxzYW5zLXNlcmlmIiB0ZXh0LXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIiBmb250LXNpemU9IjExMCI+PHRleHQgYXJpYS1oaWRkZW49InRydWUiIHg9IjI4NSIgeT0iMTUwIiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iNDUwIj5saWZlY3ljbGU8L3RleHQ+PHRleHQgeD0iMjg1IiB5PSIxNDAiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiBmaWxsPSIjZmZmIiB0ZXh0TGVuZ3RoPSI0NTAiPmxpZmVjeWNsZTwvdGV4dD48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iODQ1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSI1MTAiPm1hdHVyaW5nPC90ZXh0Pjx0ZXh0IHg9Ijg0NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgZmlsbD0iI2ZmZiIgdGV4dExlbmd0aD0iNTEwIj5tYXR1cmluZzwvdGV4dD48L2c+PC9zdmc+" alt="Lifecycle: maturing" /></a></p>
<!-- badges: end -->

<p>The goal of clinspacy is to perform biomedical named entity recognition, Unified Medical Language System (UMLS) concept mapping, and negation detection using the Python spaCy, scispacy, and medspacy packages.</p>
<h2 id="installation">Installation</h2>
<p>You can install the GitHub version of clinspacy with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1">remotes<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&#39;ML4LHS/clinspacy&#39;</span>, <span class="dt">INSTALL_opts =</span> <span class="st">&#39;--no-multiarch&#39;</span>)</a></code></pre></div>
<h2 id="how-to-load-clinspacy">How to load clinspacy</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">library</span>(clinspacy)</a></code></pre></div>
<h2 id="initiating-clinspacy">Initiating clinspacy</h2>
<p>Initiating clinspacy is optional. If you do not initiate the package using <code>clinspacy_init()</code>, it will be automatically initiated without the UMLS linker. The UMLS linker takes up ~12 GB of RAM, so if you would like to use the linker, you can initiate clinspacy with the linker. The linker can still be added on later by reinitiating with the <code>use_linker</code> argument set to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="kw">clinspacy_init</span>() <span class="co"># This is optional! The default functionality is to initiatie clinspacy without the UMLS linker</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co">#&gt; Clinspacy has already been initialized. Set the use_linker argument to turn the linker on or off.</span></a>
<a class="sourceLine" id="cb3-3" title="3"><span class="co">#&gt; NULL</span></a></code></pre></div>
<h2 id="named-entity-recognition-without-the-umls-linker">Named entity recognition (without the UMLS linker)</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw">clinspacy</span>(<span class="st">&#39;This patient has diabetes and CKD stage 3 but no HTN.&#39;</span>)</a>
<a class="sourceLine" id="cb4-2" title="2"><span class="co">#&gt; Processing... This patient has diabetes and CKD stage 3 but no HTN.</span></a>
<a class="sourceLine" id="cb4-3" title="3"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=======================                                                                      |  25%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |======================================================================                       |  75%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb4-4" title="4"><span class="co">#&gt;        entity       lemma is_family is_historical is_hypothetical is_negated is_uncertain</span></a>
<a class="sourceLine" id="cb4-5" title="5"><span class="co">#&gt; 1     patient     patient     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-6" title="6"><span class="co">#&gt; 2    diabetes    diabetes     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="co">#&gt; 3 CKD stage 3 ckd stage 3     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="co">#&gt; 4         HTN         htn     FALSE         FALSE           FALSE       TRUE        FALSE</span></a>
<a class="sourceLine" id="cb4-9" title="9"><span class="co">#&gt;   section_title</span></a>
<a class="sourceLine" id="cb4-10" title="10"><span class="co">#&gt; 1          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-11" title="11"><span class="co">#&gt; 2          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-12" title="12"><span class="co">#&gt; 3          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-13" title="13"><span class="co">#&gt; 4          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-14" title="14"></a>
<a class="sourceLine" id="cb4-15" title="15"><span class="kw">clinspacy</span>(<span class="st">&#39;HISTORY: He presents with chest pain. PMH: HTN. MEDICATIONS: This patient with diabetes is taking omeprazole, aspirin, and lisinopril 10 mg but is not taking albuterol anymore as his asthma has resolved. ALLERGIES: penicillin.&#39;</span>)</a>
<a class="sourceLine" id="cb4-16" title="16"><span class="co">#&gt; Processing... HISTORY: He presents with chest pain. PMH: HTN. MEDICATIONS: This patient with diabetes is taking omeprazole, aspirin, and lisinopril 10 mg but is not taking albuterol anymore as his asthma has resolved. ALLERGIES: penicillin.</span></a>
<a class="sourceLine" id="cb4-17" title="17"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=======                                                                                      |   8%  |                                                                                                     |==============                                                                               |  15%  |                                                                                                     |=====================                                                                        |  23%  |                                                                                                     |====================================                                                         |  38%  |                                                                                                     |===========================================                                                  |  46%  |                                                                                                     |==================================================                                           |  54%  |                                                                                                     |=========================================================                                    |  62%  |                                                                                                     |================================================================                             |  69%  |                                                                                                     |========================================================================                     |  77%  |                                                                                                     |===============================================================================              |  85%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb4-18" title="18"><span class="co">#&gt;        entity      lemma is_family is_historical is_hypothetical is_negated is_uncertain</span></a>
<a class="sourceLine" id="cb4-19" title="19"><span class="co">#&gt; 1  chest pain chest pain     FALSE          TRUE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-20" title="20"><span class="co">#&gt; 2         PMH        PMH     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-21" title="21"><span class="co">#&gt; 3         HTN        htn     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-22" title="22"><span class="co">#&gt; 4     patient    patient     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-23" title="23"><span class="co">#&gt; 5    diabetes   diabetes     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-24" title="24"><span class="co">#&gt; 6  omeprazole omeprazole     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-25" title="25"><span class="co">#&gt; 7     aspirin    aspirin     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-26" title="26"><span class="co">#&gt; 8  lisinopril lisinopril     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-27" title="27"><span class="co">#&gt; 9   albuterol  albuterol     FALSE         FALSE           FALSE       TRUE        FALSE</span></a>
<a class="sourceLine" id="cb4-28" title="28"><span class="co">#&gt; 10     asthma     asthma     FALSE         FALSE           FALSE       TRUE        FALSE</span></a>
<a class="sourceLine" id="cb4-29" title="29"><span class="co">#&gt; 11 penicillin penicillin     FALSE         FALSE           FALSE      FALSE        FALSE</span></a>
<a class="sourceLine" id="cb4-30" title="30"><span class="co">#&gt;           section_title</span></a>
<a class="sourceLine" id="cb4-31" title="31"><span class="co">#&gt; 1                  &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb4-32" title="32"><span class="co">#&gt; 2  past_medical_history</span></a>
<a class="sourceLine" id="cb4-33" title="33"><span class="co">#&gt; 3  past_medical_history</span></a>
<a class="sourceLine" id="cb4-34" title="34"><span class="co">#&gt; 4           medications</span></a>
<a class="sourceLine" id="cb4-35" title="35"><span class="co">#&gt; 5           medications</span></a>
<a class="sourceLine" id="cb4-36" title="36"><span class="co">#&gt; 6           medications</span></a>
<a class="sourceLine" id="cb4-37" title="37"><span class="co">#&gt; 7           medications</span></a>
<a class="sourceLine" id="cb4-38" title="38"><span class="co">#&gt; 8           medications</span></a>
<a class="sourceLine" id="cb4-39" title="39"><span class="co">#&gt; 9           medications</span></a>
<a class="sourceLine" id="cb4-40" title="40"><span class="co">#&gt; 10          medications</span></a>
<a class="sourceLine" id="cb4-41" title="41"><span class="co">#&gt; 11            allergies</span></a></code></pre></div>
<h2 id="using-the-mtsamples-dataset">Using the mtsamples dataset</h2>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1"><span class="kw">data</span>(mtsamples)</a>
<a class="sourceLine" id="cb5-2" title="2"></a>
<a class="sourceLine" id="cb5-3" title="3">mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>,]</a>
<a class="sourceLine" id="cb5-4" title="4"><span class="co">#&gt;   note_id                                                      description          medical_specialty</span></a>
<a class="sourceLine" id="cb5-5" title="5"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies.       Allergy / Immunology</span></a>
<a class="sourceLine" id="cb5-6" title="6"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass.                 Bariatrics</span></a>
<a class="sourceLine" id="cb5-7" title="7"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass.                 Bariatrics</span></a>
<a class="sourceLine" id="cb5-8" title="8"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler. Cardiovascular / Pulmonary</span></a>
<a class="sourceLine" id="cb5-9" title="9"><span class="co">#&gt; 5       5                                               2-D Echocardiogram Cardiovascular / Pulmonary</span></a>
<a class="sourceLine" id="cb5-10" title="10"><span class="co">#&gt;                               sample_name</span></a>
<a class="sourceLine" id="cb5-11" title="11"><span class="co">#&gt; 1                       Allergic Rhinitis</span></a>
<a class="sourceLine" id="cb5-12" title="12"><span class="co">#&gt; 2 Laparoscopic Gastric Bypass Consult - 2</span></a>
<a class="sourceLine" id="cb5-13" title="13"><span class="co">#&gt; 3 Laparoscopic Gastric Bypass Consult - 1</span></a>
<a class="sourceLine" id="cb5-14" title="14"><span class="co">#&gt; 4                  2-D Echocardiogram - 1</span></a>
<a class="sourceLine" id="cb5-15" title="15"><span class="co">#&gt; 5                  2-D Echocardiogram - 2</span></a>
<a class="sourceLine" id="cb5-16" title="16"><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            transcription</span></a>
<a class="sourceLine" id="cb5-17" title="17"><span class="co">#&gt; 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    SUBJECTIVE:,  This 23-year-old white female presents with complaint of allergies.  She used to have allergies when she lived in Seattle but she thinks they are worse here.  In the past, she has tried Claritin, and Zyrtec.  Both worked for short time but then seemed to lose effectiveness.  She has used Allegra also.  She used that last summer and she began using it again two weeks ago.  It does not appear to be working very well.  She has used over-the-counter sprays but no prescription nasal sprays.  She does have asthma but doest not require daily medication for this and does not think it is flaring up.,MEDICATIONS: , Her only medication currently is Ortho Tri-Cyclen and the Allegra.,ALLERGIES: , She has no known medicine allergies.,OBJECTIVE:,Vitals:  Weight was 130 pounds and blood pressure 124/78.,HEENT:  Her throat was mildly erythematous without exudate.  Nasal mucosa was erythematous and swollen.  Only clear drainage was seen.  TMs were clear.,Neck:  Supple without adenopathy.,Lungs:  Clear.,ASSESSMENT:,  Allergic rhinitis.,PLAN:,1.  She will try Zyrtec instead of Allegra again.  Another option will be to use loratadine.  She does not think she has prescription coverage so that might be cheaper.,2.  Samples of Nasonex two sprays in each nostril given for three weeks.  A prescription was written as well.</span></a>
<a class="sourceLine" id="cb5-18" title="18"><span class="co">#&gt; 2                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        PAST MEDICAL HISTORY:, He has difficulty climbing stairs, difficulty with airline seats, tying shoes, used to public seating, and lifting objects off the floor.  He exercises three times a week at home and does cardio.  He has difficulty walking two blocks or five flights of stairs.  Difficulty with snoring.  He has muscle and joint pains including knee pain, back pain, foot and ankle pain, and swelling.  He has gastroesophageal reflux disease.,PAST SURGICAL HISTORY:, Includes reconstructive surgery on his right hand 13 years ago.  ,SOCIAL HISTORY:, He is currently single.  He has about ten drinks a year.  He had smoked significantly up until several months ago.  He now smokes less than three cigarettes a day.,FAMILY HISTORY:, Heart disease in both grandfathers, grandmother with stroke, and a grandmother with diabetes.  Denies obesity and hypertension in other family members.,CURRENT MEDICATIONS:, None.,ALLERGIES:,  He is allergic to Penicillin.,MISCELLANEOUS/EATING HISTORY:, He has been going to support groups for seven months with Lynn Holmberg in Greenwich and he is from Eastchester, New York and he feels that we are the appropriate program.  He had a poor experience with the Greenwich program.  Eating history, he is not an emotional eater.  Does not like sweets.  He likes big portions and carbohydrates.  He likes chicken and not steak.  He currently weighs 312 pounds.  Ideal body weight would be 170 pounds.  He is 142 pounds overweight.  If ,he lost 60% of his excess body weight that would be 84 pounds and he should weigh about 228.,REVIEW OF SYSTEMS: ,Negative for head, neck, heart, lungs, GI, GU, orthopedic, and skin.  Specifically denies chest pain, heart attack, coronary artery disease, congestive heart failure, arrhythmia, atrial fibrillation, pacemaker, high cholesterol, pulmonary embolism, high blood pressure, CVA, venous insufficiency, thrombophlebitis, asthma, shortness of breath, COPD, emphysema, sleep apnea, diabetes, leg and foot swelling, osteoarthritis, rheumatoid arthritis, hiatal hernia, peptic ulcer disease, gallstones, infected gallbladder, pancreatitis, fatty liver, hepatitis, hemorrhoids, rectal bleeding, polyps, incontinence of stool, urinary stress incontinence, or cancer.  Denies cellulitis, pseudotumor cerebri, meningitis, or encephalitis.,PHYSICAL EXAMINATION:, He is alert and oriented x 3.  Cranial nerves II-XII are intact.  Afebrile.  Vital Signs are stable.</span></a>
<a class="sourceLine" id="cb5-19" title="19"><span class="co">#&gt; 3 HISTORY OF PRESENT ILLNESS: , I have seen ABC today.  He is a very pleasant gentleman who is 42 years old, 344 pounds.  He is 5&#39;9&quot;.  He has a BMI of 51.  He has been overweight for ten years since the age of 33, at his highest he was 358 pounds, at his lowest 260.  He is pursuing surgical attempts of weight loss to feel good, get healthy, and begin to exercise again.  He wants to be able to exercise and play volleyball.  Physically, he is sluggish.  He gets tired quickly.  He does not go out often.  When he loses weight he always regains it and he gains back more than he lost.  His biggest weight loss is 25 pounds and it was three months before he gained it back.  He did six months of not drinking alcohol and not taking in many calories.  He has been on multiple commercial weight loss programs including Slim Fast for one month one year ago and Atkin&#39;s Diet for one month two years ago.,PAST MEDICAL HISTORY: , He has difficulty climbing stairs, difficulty with airline seats, tying shoes, used to public seating, difficulty walking, high cholesterol, and high blood pressure.  He has asthma and difficulty walking two blocks or going eight to ten steps.  He has sleep apnea and snoring.  He is a diabetic, on medication.  He has joint pain, knee pain, back pain, foot and ankle pain, leg and foot swelling.  He has hemorrhoids.,PAST SURGICAL HISTORY: , Includes orthopedic or knee surgery.,SOCIAL HISTORY: , He is currently single.  He drinks alcohol ten to twelve drinks a week, but does not drink five days a week and then will binge drink.  He smokes one and a half pack a day for 15 years, but he has recently stopped smoking for the past two weeks.,FAMILY HISTORY: , Obesity, heart disease, and diabetes.  Family history is negative for hypertension and stroke.,CURRENT MEDICATIONS:,  Include Diovan, Crestor, and Tricor.,MISCELLANEOUS/EATING HISTORY:  ,He says a couple of friends of his have had heart attacks and have had died.  He used to drink everyday, but stopped two years ago.  He now only drinks on weekends.  He is on his second week of Chantix, which is a medication to come off smoking completely.  Eating, he eats bad food.  He is single.  He eats things like bacon, eggs, and cheese, cheeseburgers, fast food, eats four times a day, seven in the morning, at noon, 9 p.m., and 2 a.m.  He currently weighs 344 pounds and 5&#39;9&quot;.  His ideal body weight is 160 pounds.  He is 184 pounds overweight.  If he lost 70% of his excess body weight that would be 129 pounds and that would get him down to 215.,REVIEW OF SYSTEMS: , Negative for head, neck, heart, lungs, GI, GU, orthopedic, or skin.  He also is positive for gout.  He denies chest pain, heart attack, coronary artery disease, congestive heart failure, arrhythmia, atrial fibrillation, pacemaker, pulmonary embolism, or CVA.  He denies venous insufficiency or thrombophlebitis.  Denies shortness of breath, COPD, or emphysema.  Denies thyroid problems, hip pain, osteoarthritis, rheumatoid arthritis, GERD, hiatal hernia, peptic ulcer disease, gallstones, infected gallbladder, pancreatitis, fatty liver, hepatitis, rectal bleeding, polyps, incontinence of stool, urinary stress incontinence, or cancer.  He denies cellulitis, pseudotumor cerebri, meningitis, or encephalitis.,PHYSICAL EXAMINATION:  ,He is alert and oriented x 3.  Cranial nerves II-XII are intact.  Neck is soft and supple.  Lungs:  He has positive wheezing bilaterally.  Heart is regular rhythm and rate.  His abdomen is soft.  Extremities:  He has 1+ pitting edema.,IMPRESSION/PLAN:,  I have explained to him the risks and potential complications of laparoscopic gastric bypass in detail and these include bleeding, infection, deep venous thrombosis, pulmonary embolism, leakage from the gastrojejuno-anastomosis, jejunojejuno-anastomosis, and possible bowel obstruction among other potential complications.  He understands.  He wants to proceed with workup and evaluation for laparoscopic Roux-en-Y gastric bypass.  He will need to get a letter of approval from Dr. XYZ.  He will need to see a nutritionist and mental health worker.  He will need an upper endoscopy by either Dr. XYZ.  He will need to go to Dr. XYZ as he previously had a sleep study.  We will need another sleep study.  He will need H. pylori testing, thyroid function tests, LFTs, glycosylated hemoglobin, and fasting blood sugar.  After this is performed, we will submit him for insurance approval.</span></a>
<a class="sourceLine" id="cb5-20" title="20"><span class="co">#&gt; 4                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        2-D M-MODE: , ,1.  Left atrial enlargement with left atrial diameter of 4.7 cm.,2.  Normal size right and left ventricle.,3.  Normal LV systolic function with left ventricular ejection fraction of 51%.,4.  Normal LV diastolic function.,5.  No pericardial effusion.,6.  Normal morphology of aortic valve, mitral valve, tricuspid valve, and pulmonary valve.,7.  PA systolic pressure is 36 mmHg.,DOPPLER: , ,1.  Mild mitral and tricuspid regurgitation.,2.  Trace aortic and pulmonary regurgitation.</span></a>
<a class="sourceLine" id="cb5-21" title="21"><span class="co">#&gt; 5                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     1.  The left ventricular cavity size and wall thickness appear normal.  The wall motion and left ventricular systolic function appears hyperdynamic with estimated ejection fraction of 70% to 75%.  There is near-cavity obliteration seen.  There also appears to be increased left ventricular outflow tract gradient at the mid cavity level consistent with hyperdynamic left ventricular systolic function.  There is abnormal left ventricular relaxation pattern seen as well as elevated left atrial pressures seen by Doppler examination.,2.  The left atrium appears mildly dilated.,3.  The right atrium and right ventricle appear normal.,4.  The aortic root appears normal.,5.  The aortic valve appears calcified with mild aortic valve stenosis, calculated aortic valve area is 1.3 cm square with a maximum instantaneous gradient of 34 and a mean gradient of 19 mm.,6.  There is mitral annular calcification extending to leaflets and supportive structures with thickening of mitral valve leaflets with mild mitral regurgitation.,7.  The tricuspid valve appears normal with trace tricuspid regurgitation with moderate pulmonary artery hypertension.  Estimated pulmonary artery systolic pressure is 49 mmHg.  Estimated right atrial pressure of 10 mmHg.,8.  The pulmonary valve appears normal with trace pulmonary insufficiency.,9.  There is no pericardial effusion or intracardiac mass seen.,10.  There is a color Doppler suggestive of a patent foramen ovale with lipomatous hypertrophy of the interatrial septum.,11.  The study was somewhat technically limited and hence subtle abnormalities could be missed from the study.,</span></a>
<a class="sourceLine" id="cb5-22" title="22"><span class="co">#&gt;                                                                                                                                                                                                                                                                                                                                  keywords</span></a>
<a class="sourceLine" id="cb5-23" title="23"><span class="co">#&gt; 1                                                                                                                                                                                                     allergy / immunology, allergic rhinitis, allergies, asthma, nasal sprays, rhinitis, nasal, erythematous, allegra, sprays, allergic,</span></a>
<a class="sourceLine" id="cb5-24" title="24"><span class="co">#&gt; 2                                                                                                bariatrics, laparoscopic gastric bypass, weight loss programs, gastric bypass, atkin&#39;s diet, weight watcher&#39;s, body weight, laparoscopic gastric, weight loss, pounds, months, weight, laparoscopic, band, loss, diets, overweight, lost</span></a>
<a class="sourceLine" id="cb5-25" title="25"><span class="co">#&gt; 3                                                                                             bariatrics, laparoscopic gastric bypass, heart attacks, body weight, pulmonary embolism, potential complications, sleep study, weight loss, gastric bypass, anastomosis, loss, sleep, laparoscopic, gastric, bypass, heart, pounds, weight,</span></a>
<a class="sourceLine" id="cb5-26" title="26"><span class="co">#&gt; 4                                                                          cardiovascular / pulmonary, 2-d m-mode, doppler, aortic valve, atrial enlargement, diastolic function, ejection fraction, mitral, mitral valve, pericardial effusion, pulmonary valve, regurgitation, systolic function, tricuspid, tricuspid valve, normal lv</span></a>
<a class="sourceLine" id="cb5-27" title="27"><span class="co">#&gt; 5 cardiovascular / pulmonary, 2-d, doppler, echocardiogram, annular, aortic root, aortic valve, atrial, atrium, calcification, cavity, ejection fraction, mitral, obliteration, outflow, regurgitation, relaxation pattern, stenosis, systolic function, tricuspid, valve, ventricular, ventricular cavity, wall motion, pulmonary artery</span></a></code></pre></div>
<h2 id="binding-named-entities-to-a-data-frame-without-the-umls-linker">Binding named entities to a data frame (without the UMLS linker)</h2>
<p>Negated concepts, as identified by the medspacy cycontext flag, are ignored and do not count towards the frequencies.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1"><span class="kw">bind_clinspacy</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb6-2" title="2">               <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>)</a>
<a class="sourceLine" id="cb6-3" title="3"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb6-4" title="4"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |===============================                                                              |  33%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb6-6" title="6"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb6-7" title="7"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb6-8" title="8"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb6-9" title="9"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb6-10" title="10"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb6-11" title="11"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb6-12" title="12"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb6-13" title="13"><span class="co">#&gt;   note_id                                                      description 2-D 2-D M-Mode Consult</span></a>
<a class="sourceLine" id="cb6-14" title="14"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies.   0          0       0</span></a>
<a class="sourceLine" id="cb6-15" title="15"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass.   0          0       1</span></a>
<a class="sourceLine" id="cb6-16" title="16"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass.   0          0       1</span></a>
<a class="sourceLine" id="cb6-17" title="17"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler.   0          1       0</span></a>
<a class="sourceLine" id="cb6-18" title="18"><span class="co">#&gt; 5       5                                               2-D Echocardiogram   1          0       0</span></a>
<a class="sourceLine" id="cb6-19" title="19"><span class="co">#&gt;   Doppler Echocardiogram allergies complaint laparoscopic gastric bypass white female</span></a>
<a class="sourceLine" id="cb6-20" title="20"><span class="co">#&gt; 1       0              0         1         1                           0            1</span></a>
<a class="sourceLine" id="cb6-21" title="21"><span class="co">#&gt; 2       0              0         0         0                           1            0</span></a>
<a class="sourceLine" id="cb6-22" title="22"><span class="co">#&gt; 3       0              0         0         0                           1            0</span></a>
<a class="sourceLine" id="cb6-23" title="23"><span class="co">#&gt; 4       1              0         0         0                           0            0</span></a>
<a class="sourceLine" id="cb6-24" title="24"><span class="co">#&gt; 5       0              1         0         0                           0            0</span></a></code></pre></div>
<h2 id="binding-entity-embeddings-to-a-data-frame-without-the-umls-linker">Binding entity embeddings to a data frame (without the UMLS linker)</h2>
<p>With the UMLS linker disabled, entity embeddings can be extracted from the scispacy Python package. Up to 200-dimensional embeddings can be returned.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw">bind_clinspacy_embeddings</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb7-2" title="2">                          <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>,</a>
<a class="sourceLine" id="cb7-3" title="3">                          <span class="dt">num_embeddings =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb7-4" title="4"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb7-5" title="5"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |===============================                                                              |  33%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb7-6" title="6"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb7-7" title="7"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb7-8" title="8"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb7-9" title="9"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb7-10" title="10"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb7-11" title="11"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb7-12" title="12"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb7-13" title="13"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb7-14" title="14"><span class="co">#&gt;   note_id                                                      description    emb_001    emb_002</span></a>
<a class="sourceLine" id="cb7-15" title="15"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies. -0.1959790 0.28813400</span></a>
<a class="sourceLine" id="cb7-16" title="16"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass. -0.1115363 0.01725144</span></a>
<a class="sourceLine" id="cb7-17" title="17"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass. -0.1115363 0.01725144</span></a>
<a class="sourceLine" id="cb7-18" title="18"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler. -0.3077586 0.25928350</span></a>
<a class="sourceLine" id="cb7-19" title="19"><span class="co">#&gt; 5       5                                               2-D Echocardiogram  0.0248010 0.32503700</span></a>
<a class="sourceLine" id="cb7-20" title="20"><span class="co">#&gt;       emb_003     emb_004    emb_005</span></a>
<a class="sourceLine" id="cb7-21" title="21"><span class="co">#&gt; 1  0.09685702 -0.20641684 -0.1554238</span></a>
<a class="sourceLine" id="cb7-22" title="22"><span class="co">#&gt; 2 -0.13519235 -0.05496463  0.1488807</span></a>
<a class="sourceLine" id="cb7-23" title="23"><span class="co">#&gt; 3 -0.13519235 -0.05496463  0.1488807</span></a>
<a class="sourceLine" id="cb7-24" title="24"><span class="co">#&gt; 4 -0.37220851 -0.06021732  0.0386426</span></a>
<a class="sourceLine" id="cb7-25" title="25"><span class="co">#&gt; 5 -0.28739650  0.01444300  0.3118135</span></a></code></pre></div>
<h2 id="adding-the-umls-linker">Adding the UMLS linker</h2>
<p>If you would like the UMLS linker to be enabled by default, then there is no need for</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1"><span class="kw">clinspacy_init</span>(<span class="dt">use_linker =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb8-2" title="2"><span class="co">#&gt; Loading the UMLS entity linker... (this may take a while)</span></a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#&gt; Adding the UMLS entity linker to the spacy pipeline...</span></a>
<a class="sourceLine" id="cb8-4" title="4"><span class="co">#&gt; NULL</span></a></code></pre></div>
<h2 id="named-entity-recognition-with-the-umls-linker">Named entity recognition (with the UMLS linker)</h2>
<p>By turning on the UMLS linker, you can restrict the results by semantic type.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw">clinspacy</span>(<span class="st">&#39;This patient has diabetes and CKD stage 3 but no HTN.&#39;</span>)</a>
<a class="sourceLine" id="cb9-2" title="2"><span class="co">#&gt; Processing... This patient has diabetes and CKD stage 3 but no HTN.</span></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=======================                                                                      |  25%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |======================================================================                       |  75%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb9-4" title="4"><span class="co">#&gt;        cui      entity       lemma        semantic_type                      definition is_family</span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="co">#&gt; 1 C1550655     patient     patient       Body Substance         Specimen Type - Patient     FALSE</span></a>
<a class="sourceLine" id="cb9-6" title="6"><span class="co">#&gt; 2 C1578481     patient     patient      Idea or Concept      Mail Claim Party - Patient     FALSE</span></a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co">#&gt; 3 C1578483     patient     patient      Idea or Concept         Report source - Patient     FALSE</span></a>
<a class="sourceLine" id="cb9-8" title="8"><span class="co">#&gt; 4 C1578484     patient     patient      Idea or Concept Relationship modifier - Patient     FALSE</span></a>
<a class="sourceLine" id="cb9-9" title="9"><span class="co">#&gt; 5 C1578485     patient     patient Intellectual Product Specimen Source Codes - Patient     FALSE</span></a>
<a class="sourceLine" id="cb9-10" title="10"><span class="co">#&gt; 6 C0011847    diabetes    diabetes  Disease or Syndrome                        Diabetes     FALSE</span></a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co">#&gt; 7 C0011849    diabetes    diabetes  Disease or Syndrome               Diabetes Mellitus     FALSE</span></a>
<a class="sourceLine" id="cb9-12" title="12"><span class="co">#&gt; 8 C2316787 CKD stage 3 ckd stage 3  Disease or Syndrome  Chronic kidney disease stage 3     FALSE</span></a>
<a class="sourceLine" id="cb9-13" title="13"><span class="co">#&gt; 9 C0020538         HTN         htn  Disease or Syndrome            Hypertensive disease     FALSE</span></a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co">#&gt;   is_historical is_hypothetical is_negated is_uncertain section_title</span></a>
<a class="sourceLine" id="cb9-15" title="15"><span class="co">#&gt; 1         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-16" title="16"><span class="co">#&gt; 2         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-17" title="17"><span class="co">#&gt; 3         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-18" title="18"><span class="co">#&gt; 4         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-19" title="19"><span class="co">#&gt; 5         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-20" title="20"><span class="co">#&gt; 6         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co">#&gt; 7         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-22" title="22"><span class="co">#&gt; 8         FALSE           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-23" title="23"><span class="co">#&gt; 9         FALSE           FALSE       TRUE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-24" title="24"></a>
<a class="sourceLine" id="cb9-25" title="25"><span class="kw">clinspacy</span>(<span class="st">&#39;This patient with diabetes is taking omeprazole, aspirin, and lisinopril 10 mg but is not taking albuterol anymore as his asthma has resolved.&#39;</span>,</a>
<a class="sourceLine" id="cb9-26" title="26">          <span class="dt">semantic_types =</span> <span class="st">&#39;Pharmacologic Substance&#39;</span>)</a>
<a class="sourceLine" id="cb9-27" title="27"><span class="co">#&gt; Processing... This patient with diabetes is taking omeprazole, aspirin, and lisinopril 10 mg but is not taking albuterol anymore as his asthma has resolved.</span></a>
<a class="sourceLine" id="cb9-28" title="28"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============                                                                                |  14%  |                                                                                                     |===========================                                                                  |  29%  |                                                                                                     |========================================                                                     |  43%  |                                                                                                     |=====================================================                                        |  57%  |                                                                                                     |==================================================================                           |  71%  |                                                                                                     |================================================================================             |  86%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb9-29" title="29"><span class="co">#&gt;        cui     entity      lemma           semantic_type definition is_family is_historical</span></a>
<a class="sourceLine" id="cb9-30" title="30"><span class="co">#&gt; 1 C0028978 omeprazole omeprazole Pharmacologic Substance Omeprazole     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-31" title="31"><span class="co">#&gt; 2 C0004057    aspirin    aspirin Pharmacologic Substance    Aspirin     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-32" title="32"><span class="co">#&gt; 3 C0065374 lisinopril lisinopril Pharmacologic Substance Lisinopril     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-33" title="33"><span class="co">#&gt; 4 C0001927  albuterol  albuterol Pharmacologic Substance  Albuterol     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-34" title="34"><span class="co">#&gt;   is_hypothetical is_negated is_uncertain section_title</span></a>
<a class="sourceLine" id="cb9-35" title="35"><span class="co">#&gt; 1           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-36" title="36"><span class="co">#&gt; 2           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-37" title="37"><span class="co">#&gt; 3           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-38" title="38"><span class="co">#&gt; 4           FALSE       TRUE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-39" title="39"></a>
<a class="sourceLine" id="cb9-40" title="40"><span class="kw">clinspacy</span>(<span class="st">&#39;This patient with diabetes is taking omeprazole, aspirin, and lisinopril 10 mg but is not taking albuterol anymore as his asthma has resolved.&#39;</span>,</a>
<a class="sourceLine" id="cb9-41" title="41">          <span class="dt">semantic_types =</span> <span class="st">&#39;Disease or Syndrome&#39;</span>)</a>
<a class="sourceLine" id="cb9-42" title="42"><span class="co">#&gt; Processing... This patient with diabetes is taking omeprazole, aspirin, and lisinopril 10 mg but is not taking albuterol anymore as his asthma has resolved.</span></a>
<a class="sourceLine" id="cb9-43" title="43"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============                                                                                |  14%  |                                                                                                     |===========================                                                                  |  29%  |                                                                                                     |========================================                                                     |  43%  |                                                                                                     |=====================================================                                        |  57%  |                                                                                                     |==================================================================                           |  71%  |                                                                                                     |================================================================================             |  86%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb9-44" title="44"><span class="co">#&gt;        cui   entity    lemma       semantic_type        definition is_family is_historical</span></a>
<a class="sourceLine" id="cb9-45" title="45"><span class="co">#&gt; 1 C0011847 diabetes diabetes Disease or Syndrome          Diabetes     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-46" title="46"><span class="co">#&gt; 2 C0011849 diabetes diabetes Disease or Syndrome Diabetes Mellitus     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-47" title="47"><span class="co">#&gt; 3 C0004096   asthma   asthma Disease or Syndrome            Asthma     FALSE         FALSE</span></a>
<a class="sourceLine" id="cb9-48" title="48"><span class="co">#&gt;   is_hypothetical is_negated is_uncertain section_title</span></a>
<a class="sourceLine" id="cb9-49" title="49"><span class="co">#&gt; 1           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-50" title="50"><span class="co">#&gt; 2           FALSE      FALSE        FALSE          &lt;NA&gt;</span></a>
<a class="sourceLine" id="cb9-51" title="51"><span class="co">#&gt; 3           FALSE       TRUE        FALSE          &lt;NA&gt;</span></a></code></pre></div>
<h2 id="binding-umls-concept-unique-identifiers-to-a-data-frame-with-the-umls-linker">Binding UMLS concept unique identifiers to a data frame (with the UMLS linker)</h2>
<p>This function binds columns containing concept unique identifiers with which scispacy has 99% confidence of being present with values containing frequencies. Negated concepts, as identified by the medspacy cycontext is_negated flag, are ignored and do not count towards the frequencies.</p>
<p>Note that by turning on the UMLS linker, you can restrict the results by semantic type.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw">bind_clinspacy</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb10-2" title="2">               <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>)</a>
<a class="sourceLine" id="cb10-3" title="3"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-5" title="5"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb10-6" title="6"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-7" title="7"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb10-8" title="8"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-9" title="9"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb10-10" title="10"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-11" title="11"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb10-12" title="12"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-13" title="13"><span class="co">#&gt;   note_id                                                      description C0009818 C0013516 C0020517</span></a>
<a class="sourceLine" id="cb10-14" title="14"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies.        0        0        1</span></a>
<a class="sourceLine" id="cb10-15" title="15"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass.        1        0        0</span></a>
<a class="sourceLine" id="cb10-16" title="16"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass.        1        0        0</span></a>
<a class="sourceLine" id="cb10-17" title="17"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler.        0        0        0</span></a>
<a class="sourceLine" id="cb10-18" title="18"><span class="co">#&gt; 5       5                                               2-D Echocardiogram        0        1        0</span></a>
<a class="sourceLine" id="cb10-19" title="19"><span class="co">#&gt;   C0554756 C1705052 C2243117 C3864418 C4039248</span></a>
<a class="sourceLine" id="cb10-20" title="20"><span class="co">#&gt; 1        0        0        0        1        0</span></a>
<a class="sourceLine" id="cb10-21" title="21"><span class="co">#&gt; 2        0        0        0        0        1</span></a>
<a class="sourceLine" id="cb10-22" title="22"><span class="co">#&gt; 3        0        0        0        0        1</span></a>
<a class="sourceLine" id="cb10-23" title="23"><span class="co">#&gt; 4        1        0        0        0        0</span></a>
<a class="sourceLine" id="cb10-24" title="24"><span class="co">#&gt; 5        0        1        1        0        0</span></a>
<a class="sourceLine" id="cb10-25" title="25"></a>
<a class="sourceLine" id="cb10-26" title="26"><span class="kw">bind_clinspacy</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb10-27" title="27">               <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>,</a>
<a class="sourceLine" id="cb10-28" title="28">               <span class="dt">semantic_types =</span> <span class="st">&#39;Diagnostic Procedure&#39;</span>)</a>
<a class="sourceLine" id="cb10-29" title="29"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb10-30" title="30"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-31" title="31"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb10-32" title="32"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-33" title="33"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb10-34" title="34"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-35" title="35"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb10-36" title="36"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-37" title="37"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb10-38" title="38"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb10-39" title="39"><span class="co">#&gt;   note_id                                                      description C0013516 C0554756</span></a>
<a class="sourceLine" id="cb10-40" title="40"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies.        0        0</span></a>
<a class="sourceLine" id="cb10-41" title="41"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass.        0        0</span></a>
<a class="sourceLine" id="cb10-42" title="42"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass.        0        0</span></a>
<a class="sourceLine" id="cb10-43" title="43"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler.        0        1</span></a>
<a class="sourceLine" id="cb10-44" title="44"><span class="co">#&gt; 5       5                                               2-D Echocardiogram        1        0</span></a></code></pre></div>
<h2 id="binding-concept-embeddings-to-a-data-frame-with-the-umls-linker">Binding concept embeddings to a data frame (with the UMLS linker)</h2>
<p>The default embeddings are from the scispacy R package. If you want to use the cui2vec embeddings (only available with the linker enabled), you ned to set the <code>type</code> arguement to <code>cui2vec</code>. Up to 500-dimensional embeddings can be returned.</p>
<p>Note that by turning on the UMLS linker, you can restrict the results by semantic type (with either type of embedding).</p>
<h3 id="scispacy-embeddings-with-the-umls-linker">Scispacy embeddings (with the UMLS linker)</h3>
<p>With the UMLS linker enabled, you can restrict by semantic type when obtaining scispacy embeddings.</p>
<p>Note: The mean embeddings may be slightly different than if the linker was disabled because entities may be captured twice (as entities may map to multiple concepts).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1"><span class="kw">bind_clinspacy_embeddings</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb11-2" title="2">                          <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>,</a>
<a class="sourceLine" id="cb11-3" title="3">                          <span class="dt">num_embeddings =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb11-4" title="4"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-6" title="6"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="co">#&gt;   note_id                                                      description    emb_001    emb_002</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies. -0.3446915 0.31240000</span></a>
<a class="sourceLine" id="cb11-16" title="16"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass. -0.1115363 0.01725144</span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass. -0.1115363 0.01725144</span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler. -0.4044230 0.21798199</span></a>
<a class="sourceLine" id="cb11-19" title="19"><span class="co">#&gt; 5       5                                               2-D Echocardiogram  0.0408278 0.34547000</span></a>
<a class="sourceLine" id="cb11-20" title="20"><span class="co">#&gt;      emb_003     emb_004    emb_005</span></a>
<a class="sourceLine" id="cb11-21" title="21"><span class="co">#&gt; 1  0.1075445 -0.33388351 -0.2601905</span></a>
<a class="sourceLine" id="cb11-22" title="22"><span class="co">#&gt; 2 -0.1351923 -0.05496463  0.1488807</span></a>
<a class="sourceLine" id="cb11-23" title="23"><span class="co">#&gt; 3 -0.1351923 -0.05496463  0.1488807</span></a>
<a class="sourceLine" id="cb11-24" title="24"><span class="co">#&gt; 4 -0.4359590 -0.05181420 -0.0757723</span></a>
<a class="sourceLine" id="cb11-25" title="25"><span class="co">#&gt; 5 -0.3142290  0.08719834  0.2681757</span></a>
<a class="sourceLine" id="cb11-26" title="26"></a>
<a class="sourceLine" id="cb11-27" title="27"><span class="kw">bind_clinspacy_embeddings</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb11-28" title="28">                          <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>,</a>
<a class="sourceLine" id="cb11-29" title="29">                          <span class="dt">num_embeddings =</span> <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb11-30" title="30">                          <span class="dt">semantic_types =</span> <span class="st">&#39;Diagnostic Procedure&#39;</span>)</a>
<a class="sourceLine" id="cb11-31" title="31"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb11-32" title="32"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-33" title="33"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb11-34" title="34"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-35" title="35"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb11-36" title="36"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-37" title="37"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb11-38" title="38"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-39" title="39"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb11-40" title="40"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb11-41" title="41"><span class="co">#&gt;   note_id                                                      description    emb_001  emb_002</span></a>
<a class="sourceLine" id="cb11-42" title="42"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies.         NA       NA</span></a>
<a class="sourceLine" id="cb11-43" title="43"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass.         NA       NA</span></a>
<a class="sourceLine" id="cb11-44" title="44"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass.         NA       NA</span></a>
<a class="sourceLine" id="cb11-45" title="45"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler. -0.4044230 0.217982</span></a>
<a class="sourceLine" id="cb11-46" title="46"><span class="co">#&gt; 5       5                                               2-D Echocardiogram  0.0728814 0.386336</span></a>
<a class="sourceLine" id="cb11-47" title="47"><span class="co">#&gt;     emb_003    emb_004    emb_005</span></a>
<a class="sourceLine" id="cb11-48" title="48"><span class="co">#&gt; 1        NA         NA         NA</span></a>
<a class="sourceLine" id="cb11-49" title="49"><span class="co">#&gt; 2        NA         NA         NA</span></a>
<a class="sourceLine" id="cb11-50" title="50"><span class="co">#&gt; 3        NA         NA         NA</span></a>
<a class="sourceLine" id="cb11-51" title="51"><span class="co">#&gt; 4 -0.435959 -0.0518142 -0.0757723</span></a>
<a class="sourceLine" id="cb11-52" title="52"><span class="co">#&gt; 5 -0.367894  0.2327090  0.1809000</span></a></code></pre></div>
<h3 id="cui2vec-embeddings-with-the-umls-linker">Cui2vec embeddings (with the UMLS linker)</h3>
<p>These are only available with the UMLS linker enabled.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">bind_clinspacy_embeddings</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb12-2" title="2">                          <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>,</a>
<a class="sourceLine" id="cb12-3" title="3">                          <span class="dt">type =</span> <span class="st">&#39;cui2vec&#39;</span>,</a>
<a class="sourceLine" id="cb12-4" title="4">                          <span class="dt">num_embeddings =</span> <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb12-5" title="5"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb12-6" title="6"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-7" title="7"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb12-8" title="8"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-9" title="9"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb12-10" title="10"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-11" title="11"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb12-12" title="12"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-13" title="13"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb12-14" title="14"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-15" title="15"><span class="co">#&gt;   note_id                                                      description     emb_001    emb_002</span></a>
<a class="sourceLine" id="cb12-16" title="16"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies. -0.02252676 0.00981737</span></a>
<a class="sourceLine" id="cb12-17" title="17"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass. -0.06431815 0.02979208</span></a>
<a class="sourceLine" id="cb12-18" title="18"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass. -0.06431815 0.02979208</span></a>
<a class="sourceLine" id="cb12-19" title="19"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler. -0.06111055 0.03059523</span></a>
<a class="sourceLine" id="cb12-20" title="20"><span class="co">#&gt; 5       5                                               2-D Echocardiogram -0.08545282 0.03965676</span></a>
<a class="sourceLine" id="cb12-21" title="21"><span class="co">#&gt;         emb_003      emb_004     emb_005</span></a>
<a class="sourceLine" id="cb12-22" title="22"><span class="co">#&gt; 1 -7.112366e-17 -0.015715369  0.00204883</span></a>
<a class="sourceLine" id="cb12-23" title="23"><span class="co">#&gt; 2 -1.353084e-16 -0.046832239  0.03387485</span></a>
<a class="sourceLine" id="cb12-24" title="24"><span class="co">#&gt; 3 -1.353084e-16 -0.046832239  0.03387485</span></a>
<a class="sourceLine" id="cb12-25" title="25"><span class="co">#&gt; 4 -1.340074e-16 -0.032813400 -0.02400309</span></a>
<a class="sourceLine" id="cb12-26" title="26"><span class="co">#&gt; 5 -4.336809e-17 -0.008077436 -0.04463792</span></a>
<a class="sourceLine" id="cb12-27" title="27"></a>
<a class="sourceLine" id="cb12-28" title="28"><span class="kw">bind_clinspacy_embeddings</span>(mtsamples[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>],</a>
<a class="sourceLine" id="cb12-29" title="29">                          <span class="dt">text =</span> <span class="st">&#39;description&#39;</span>,</a>
<a class="sourceLine" id="cb12-30" title="30">                          <span class="dt">type =</span> <span class="st">&#39;cui2vec&#39;</span>,</a>
<a class="sourceLine" id="cb12-31" title="31">                          <span class="dt">num_embeddings =</span> <span class="dv">5</span>,</a>
<a class="sourceLine" id="cb12-32" title="32">                          <span class="dt">semantic_types =</span> <span class="st">&#39;Diagnostic Procedure&#39;</span>)</a>
<a class="sourceLine" id="cb12-33" title="33"><span class="co">#&gt; Processing... A 23-year-old white female presents with complaint of allergies.</span></a>
<a class="sourceLine" id="cb12-34" title="34"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================================                               |  67%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-35" title="35"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb12-36" title="36"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-37" title="37"><span class="co">#&gt; Processing... Consult for laparoscopic gastric bypass.</span></a>
<a class="sourceLine" id="cb12-38" title="38"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-39" title="39"><span class="co">#&gt; Processing... 2-D M-Mode. Doppler.</span></a>
<a class="sourceLine" id="cb12-40" title="40"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-41" title="41"><span class="co">#&gt; Processing... 2-D Echocardiogram</span></a>
<a class="sourceLine" id="cb12-42" title="42"><span class="co">#&gt;   |                                                                                                     |                                                                                             |   0%  |                                                                                                     |==============================================                                               |  50%  |                                                                                                     |=============================================================================================| 100%</span></a>
<a class="sourceLine" id="cb12-43" title="43"><span class="co">#&gt;   note_id                                                      description     emb_001    emb_002</span></a>
<a class="sourceLine" id="cb12-44" title="44"><span class="co">#&gt; 1       1 A 23-year-old white female presents with complaint of allergies.          NA         NA</span></a>
<a class="sourceLine" id="cb12-45" title="45"><span class="co">#&gt; 2       2                         Consult for laparoscopic gastric bypass.          NA         NA</span></a>
<a class="sourceLine" id="cb12-46" title="46"><span class="co">#&gt; 3       3                         Consult for laparoscopic gastric bypass.          NA         NA</span></a>
<a class="sourceLine" id="cb12-47" title="47"><span class="co">#&gt; 4       4                                             2-D M-Mode. Doppler. -0.06111055 0.03059523</span></a>
<a class="sourceLine" id="cb12-48" title="48"><span class="co">#&gt; 5       5                                               2-D Echocardiogram -0.08545282 0.03965676</span></a>
<a class="sourceLine" id="cb12-49" title="49"><span class="co">#&gt;         emb_003      emb_004     emb_005</span></a>
<a class="sourceLine" id="cb12-50" title="50"><span class="co">#&gt; 1            NA           NA          NA</span></a>
<a class="sourceLine" id="cb12-51" title="51"><span class="co">#&gt; 2            NA           NA          NA</span></a>
<a class="sourceLine" id="cb12-52" title="52"><span class="co">#&gt; 3            NA           NA          NA</span></a>
<a class="sourceLine" id="cb12-53" title="53"><span class="co">#&gt; 4 -1.340074e-16 -0.032813400 -0.02400309</span></a>
<a class="sourceLine" id="cb12-54" title="54"><span class="co">#&gt; 5 -4.336809e-17 -0.008077436 -0.04463792</span></a></code></pre></div>
<h1 id="umls-cui-definitions">UMLS CUI definitions</h1>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">data</span>(cui2vec_definitions)</a>
<a class="sourceLine" id="cb13-2" title="2"><span class="kw">head</span>(cui2vec_definitions)</a>
<a class="sourceLine" id="cb13-3" title="3"><span class="co">#&gt;        cui                         semantic_type                         definition</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="co">#&gt; 1 C0000005       Amino Acid, Peptide, or Protein     (131)I-Macroaggregated Albumin</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="co">#&gt; 2 C0000005               Pharmacologic Substance     (131)I-Macroaggregated Albumin</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="co">#&gt; 3 C0000005 Indicator, Reagent, or Diagnostic Aid     (131)I-Macroaggregated Albumin</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="co">#&gt; 4 C0000039                      Organic Chemical 1,2-Dipalmitoylphosphatidylcholine</span></a>
<a class="sourceLine" id="cb13-8" title="8"><span class="co">#&gt; 5 C0000039               Pharmacologic Substance 1,2-Dipalmitoylphosphatidylcholine</span></a>
<a class="sourceLine" id="cb13-9" title="9"><span class="co">#&gt; 6 C0000052       Amino Acid, Peptide, or Protein  1,4-alpha-Glucan Branching Enzyme</span></a></code></pre></div>

</body>
</html>
